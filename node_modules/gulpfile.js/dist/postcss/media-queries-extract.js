"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const merge_1 = __importDefault(require("lodash/merge"));
const postcss_1 = __importDefault(require("postcss"));
/**
 * Extract media queries rules.
 */
exports.default = postcss_1.default.plugin("media-queries-extract", (opts) => {
    const options = merge_1.default({ query: "" }, opts || {});
    return (css) => {
        if (!options.query) {
            return;
        }
        const nodes = [];
        css.walkAtRules("media", (node) => {
            // Filter nodes by query.
            if (options.query !== node.params) {
                return;
            }
            // Save children nodes.
            node.each((child) => {
                nodes.push(child.clone());
            });
        });
        css
            .removeAll()
            .append({ text: `media: ${options.query}` })
            .append(nodes);
    };
});
//# sourceMappingURL=media-queries-extract.js.map